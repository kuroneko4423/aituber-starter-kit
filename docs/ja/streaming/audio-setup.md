# 音声設定ガイド

AITuber配信の音声設定ガイドです。

## 目次

1. [概要](#概要)
2. [VB-Cableのセットアップ](#vb-cableのセットアップ)
3. [Windowsの音声設定](#windowsの音声設定)
4. [OBSの音声設定](#obsの音声設定)
5. [トラブルシューティング](#トラブルシューティング)

---

## 概要

### 音声フローの構成

```
┌──────────────────┐
│ AITuber          │
│ Starter Kit      │
│ (VOICEVOX音声)   │
└────────┬─────────┘
         │ 音声出力
         ▼
┌──────────────────┐
│ VB-Cable         │
│ (仮想オーディオ)  │
│ Input            │
└────────┬─────────┘
         │ 仮想ルーティング
         ▼
┌──────────────────┐
│ VB-Cable         │
│ Output           │
└────────┬─────────┘
         │ 音声入力
         ▼
┌──────────────────┐
│ OBS Studio       │
│ (配信音声)       │
└──────────────────┘
```

### なぜ仮想オーディオが必要か

- AITuber音声のみを配信に乗せる
- 他のシステム音と分離
- 音量の個別調整が可能

---

## VB-Cableのセットアップ

### インストール

1. [VB-Cable公式サイト](https://vb-audio.com/Cable/)にアクセス
2. 「Download」をクリック
3. ZIPを展開
4. `VBCABLE_Setup_x64.exe`を**管理者権限**で実行
5. 「Install Driver」をクリック
6. PCを再起動

### 確認

サウンド設定で以下が表示されていれば成功:
- 再生デバイス: CABLE Input (VB-Audio Virtual Cable)
- 録音デバイス: CABLE Output (VB-Audio Virtual Cable)

---

## Windowsの音声設定

### 1. デフォルト出力の設定

通常はスピーカーをデフォルトに設定:

1. タスクバーの音量アイコンを右クリック
2. 「サウンドの設定」
3. 出力デバイス: スピーカー（メインの出力）

### 2. アプリごとの出力設定

Windows 10/11では、アプリごとに出力先を設定できます:

1. 設定 → システム → サウンド
2. 「アプリの音量とデバイスの設定」
3. AITuber関連アプリの出力を「CABLE Input」に設定

**または、プログラム内で設定:**

AITuber Starter Kitの音声出力設定（将来実装予定）

---

## OBSの音声設定

### 1. 音声デバイス設定

OBS設定 → 音声:

| 項目 | 設定 |
|------|------|
| サンプルレート | 48kHz |
| チャンネル | ステレオ |
| デスクトップ音声 | 無効 |
| デスクトップ音声2 | 無効 |
| マイク音声 | CABLE Output |
| マイク音声2 | 無効 |

### 2. 音声ミキサー

**AITuber音声のみの場合:**
- CABLE Output（マイク）: 有効、0dB
- その他: ミュート

### 3. 音声フィルタ

CABLE Output → フィルタ:

**推奨フィルタ:**

1. **ノイズゲート**
   - 閾値: -50dB
   - AIが話していない時の無音を確保

2. **コンプレッサー**
   - 比率: 3:1
   - 閾値: -18dB
   - 音量の均一化

3. **リミッター**
   - 閾値: -3dB
   - 音割れ防止

---

## 音声モニタリング

### 自分でも音声を聞く設定

VB-Cable経由の音声を自分でも聞きたい場合:

**方法1: Windowsの設定**

1. サウンド設定 → 録音タブ
2. CABLE Outputを右クリック → プロパティ
3. 「聴く」タブ
4. 「このデバイスを聴く」にチェック
5. 再生デバイス: スピーカーを選択

**方法2: OBSの音声モニタリング**

1. 音声ミキサーでCABLE Outputの歯車をクリック
2. 「オーディオの詳細プロパティ」
3. 音声モニタリング: 「モニターと出力」

---

## 複数音声ソースの管理

### ゲーム音 + AITuber音声

```
ゲーム音 → デスクトップ音声 → OBS
AITuber → VB-Cable → マイク入力 → OBS
```

OBS設定:
- デスクトップ音声: 既定
- マイク音声: CABLE Output

### BGM + AITuber音声

BGM用に別の仮想オーディオを使用:
- VB-Cable A → BGM
- VB-Cable B → AITuber

VB-CABLEの追加版（有料）や、VoiceMeeter等を使用

---

## トラブルシューティング

### 音が出ない

1. **VB-Cableの確認**
   - デバイスマネージャーで確認
   - ドライバの再インストール

2. **出力先の確認**
   - 正しいデバイスに出力しているか

3. **OBS設定の確認**
   - CABLE Outputが選択されているか
   - ミュートになっていないか

### 音が二重に聞こえる

1. **モニタリング設定の確認**
   - 「モニターのみ」または「モニターと出力」を確認

2. **デスクトップ音声の確認**
   - 不要ならミュート

### 音声が遅延する

1. **バッファサイズの調整**
   - VoiceMeeter使用時はバッファを下げる

2. **サンプルレートの統一**
   - すべてのデバイスで48kHzに統一

### ノイズが入る

1. **ノイズフィルタを追加**
   - OBSでノイズ抑制フィルタ

2. **接地の確認**
   - オーディオインターフェース使用時

---

## 参考リンク

- [VB-Audio公式](https://vb-audio.com/Cable/)
- [VoiceMeeter](https://vb-audio.com/Voicemeeter/)（高度な音声ルーティング）
